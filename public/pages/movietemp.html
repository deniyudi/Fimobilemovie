

<template>
    <div class="page light">
        <div class="navbar">
            <div class="navbar-inner">
                <div class="left">
                    <a href="#" class="link icon-only panel-open" data-panel="left">
                        <span class="new-notification"></span>
                        <i class="icon material-icons">menu</i>
                    </a>
                </div>
                <div class="title"><img src="img/logo-header.png" alt="svelte-logo" class="svelte-logo"> </div>
                <div class="right">
                    <a href="/noticationslist/" class="link icon-only">
                        <i class="material-icons">notifications_none</i><span class="counts">9+</span>
                    </a>
                </div>
    
                <form data-search-container=".components-list" data-search-in="a" class="searchbar searchbar-expandable searchbar-components searchbar-init">
                    <div class="searchbar-inner">
                        <div class="searchbar-input-wrap">
                            <input type="search" placeholder="Search components">
                            <i class="searchbar-icon"></i>
                            <span class="input-clear-button"></span>
                        </div>
                        <span class="searchbar-disable-button if-not-aurora"></span>
                    </div>
                </form>
            </div>
        </div>

        <!-- Content -->
        <div class="tabs">
      
        <div id="tab-1" class="page-content tab tab-active">  

            <div class="block">
              <div class="card wrapperh bg-dar shadow mt-4 h-90 responsive" style="background: url(http://image.tmdb.org/t/p/w1280{{movies.heroImage.backdrop_path}});background-size: cover; background-position: center;">
                <div class="card-content wrapperh card-content-padding ">
                            <div class="contenth" style="margin-top: 250px;">
                              <div class="text">
                                <h2 style="color: white;">
                                  {{movies.heroImage.original_title}} 
                                </h2>
                              </div>
                            </div>
                </div>
            </div>
            <!-- </div> -->

            <form class="searchbar">
                <div class="searchbar-inner">
                  <div class="searchbar-input-wrap">
                    <input type="search" placeholder="Search Movie">
                    <i class="searchbar-icon"></i>
                    <span class="input-clear-button"></span>
                  </div>
                  <span class="searchbar-disable-button if-not-aurora">Cancel</span>
                </div>
            </form>
            
            <h6 class="block-title">Movie Genre<a href="" class="float-right small">View All</a></h6>
            <!-- <div class="block"> -->
                  
                <!-- Swiper -->
                <div class="swiper-container swiper-init swiper-container-initialized swiper-container-horizontal" data-pagination="{&quot;el&quot;: &quot;.swiper-pagination&quot;}" data-space-between="20" data-slides-per-view="2">
                    <div class="swiper-wrapper h-250 margin-bottom-half">
                        <div class="swiper-slide swiper-slide-active" style="width: 303.5px; margin-right: 20px;">
                            <div class="card shadow-sm border-0 bg-dark text-white h-230">
                                <figure class="background" style="background-image: url(https://image.tmdb.org/t/p/w1280{{movies.movies[1].backdrop_path}});">
                                    
                                </figure>
                                <div class="card-content card-content-padding h-200">
                                    <a href="" class="button button-rounded-36 shadow-sm button-fab button-fill color-gray margin-bottom-half"><i class="material-icons md-14">arrow_forward</i></a>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide swiper-slide-active" style="width: 303.5px; margin-right: 20px;">
                          <div class="card shadow-sm border-0 bg-dark text-white h-230">
                              <figure class="background" style="background-image: url(https://image.tmdb.org/t/p/w1280{{movies.movies[2].backdrop_path}});">
                                  
                              </figure>
                              <div class="card-content card-content-padding h-200">
                                  
                                  <!-- <div class="text-align-top"><h3>Horror<h3></div> -->
                                  
                                  <a href="" class="button button-rounded-36 shadow-sm button-fab button-fill color-gray margin-bottom-half"><i class="material-icons md-14">arrow_forward</i></a>
                                  
                              </div>
                          </div>
                      </div>
                    </div>
                    <!-- Add Pagination -->
                    <!-- <div class="swiper-pagination swiper-pagination-bullets"><span class="swiper-pagination-bullet swiper-pagination-bullet-active"></span><span class="swiper-pagination-bullet"></span><span class="swiper-pagination-bullet"></span><span class="swiper-pagination-bullet"></span><span class="swiper-pagination-bullet"></span></div> -->
                <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
              </div>

              <hr size="2px" width="100%">
            
            <h6 class="block-title">MOST POPULAR<a href="" class="float-right small">More</a></h6>
            <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="10" data-slides-per-view="3" class="swiper-container swiper-init demo-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <div class="card demo-card-header-pic" style="max-width: 750px; width: 550px; min-width: 100px;">
                    <div style="background-image:url(https://image.tmdb.org/t/p/w1280{{movies.movies[3].backdrop_path}})" class="card-header align-items-flex-end"></div>
                    <div class="card-content" style="max-width: 250px; min-width: 100px;"></div>
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="card demo-card-header-pic" style="max-width: 750px; width: 550px; min-width: 100px;">
                    <div style="background-image:url(https://image.tmdb.org/t/p/w1280{{movies.movies[4].backdrop_path}})" class="card-header align-items-flex-end"></div>
                    <div class="card-content" style="max-width: 250px; min-width: 100px;"></div>
                  </div>
                </div>

                <a href="/detmov/" class="link" @click="HI({{movies.movies[9].id}})">
                <div class="swiper-slide">
                  <div class="card demo-card-header-pic" style="max-width: 750px; width: 550px; min-width: 100px;">
                    <div style="background-image:url(https://image.tmdb.org/t/p/w1280{{movies.movies[9].backdrop_path}})" class="card-header align-items-flex-end" style="background-position: left;"></div>
                    <div class="card-content" style="max-width: 250px; min-width: 100px;">
                      <!-- <p class="date">Posted on January 21, 2015</p>
                      <p>Quisque eget vestibulum nulla. Quisque quis dui quis ex ultricies efficitur vitae non felis. Phasellus quis nibh hendrerit...</p> -->
                    </div>
                  </div>
                </div>
                </a>
              </div>
            </div>

            <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="10" data-slides-per-view="3" class="swiper-container swiper-init demo-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <div class="card demo-card-header-pic"  style="max-width: 750px; width: 550px; min-width: 100px;">
                    <div style="background-image:url(https://image.tmdb.org/t/p/w1280{{movies.movies[6].backdrop_path}})" class="card-header align-items-flex-end"></div>
                    <!-- <div class="card-content card-content-padding">
                      <h5>Avengers</h5>
                    </div> -->
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="card demo-card-header-pic"  style="max-width: 750px; width: 550px; min-width: 100px;">
                    <div style="background-image:url(https://image.tmdb.org/t/p/w1280{{movies.movies[5].backdrop_path}})" class="card-header align-items-flex-end"></div>
                    <!-- <div class="card-content card-content-padding">
                      <h5>Avengers</h5>
                    </div> -->
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="card demo-card-header-pic"  style="max-width: 750px; width: 550px; min-width: 100px;">
                    <div style="background-image:url(https://image.tmdb.org/t/p/w1280{{movies.movies[7].backdrop_path}})" class="card-header align-items-flex-end"></div>
                    <!-- <div class=" card-content card-content-padding">
                      <h5>Avengers</h5>
                    </div> -->
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="card demo-card-header-pic"  style="max-width: 750px; width: 550px; min-width: 100px;">
                    <div style="background-image:url(https://image.tmdb.org/t/p/w1280{{movies.movies[8].backdrop_path}})" class="card-header align-items-flex-end"></div>
                    <!-- <div class="card-content card-content-padding">
                      <h5>Avengers</h5>
                    </div> -->
                  </div>
                </div>
                  </div>
                  </div>

          </div>
        </div>
      </div>
    </div>
    </div>
</template>

<script>

const API_URL = 'https://api.themoviedb.org/3/';
const API_KEY = '7e97f4650ad722d5b44df91dee514674';

const SEARCH_BASE_URL = `${API_URL}search/movie?api_key=${API_KEY}&query=`;
const POPULAR_BASE_URL = `${API_URL}movie/popular?api_key=${API_KEY}`;
const MOVIE_ENDPOINT = id => `${API_URL}movie/${id}?api_key=${API_KEY}`;
const CREDITS_ENDPOINT = id => `${API_URL}movie/${id}/credits?api_key=${API_KEY}`;

const IMAGE_BASE_URL = 'http://image.tmdb.org/t/p/';
// Sizes: w300, w780, w1280, original
const BACKDROP_SIZE = 'w1280';
// w92, w154, w185, w342, w500, w780, original
const POSTER_SIZE = 'w500';

  return{
          data: async function(){
            var movies = {movies: []};
            const url_Api = 'https://api.themoviedb.org/3/movie/popular?api_key=7e97f4650ad722d5b44df91dee514674&page=1'; 
            try {
                    movies = await fetchMovies(movies, url_Api);
                    console.log(movies);
                } catch (err) {
                    console.log('error');
                }

            async function fetchMovies(movies, url) {
                const result = await (await fetch(url)).json();
                return {
                    ...movies,
                    movies: url ? [...movies.movies, ...result.results] : [...result.results],
                    heroImage: movies.heroImage || result.results[0],
                    currentPage: result.page,
                    totalPages: result.total_pages
                }
            }

            return{
              movies:movies
            }
        },

        methods:{
          HI: function(params) {
                console.log(params);
                window.localStorage.setItem('id', params);
            }
        }
        
  }
</script>